# 0821 교육내용
## 집계함수
 그룹함수를 통하여 네이버 쇼핑에서 상품을 검색하는 것처럼 데이터를 요약할 수 있다.</BR>
 수를 세거나, 가장 높거나 작은 값을 가지는 것을 가져오거나, 평균 값, 총 합계 등을 가져올 수 있다.</BR>

### COUNT
원래 예제는 아래의 예시와 같이 사용하라고 하지만, 실무에서는 아래와 같은 방법을 사용하지 않는다.
```
SELECT COUNT(EMPLOYEE_ID) -- 이 PK로 개수를 세는 방법은 사용하지 않음
  FROM EMPLOYEES
;
```
COUNT가 SELECT로 EMPLOYEES_ID항목을 가져온 뒤 그것의 수를 세는 것이라는 것을 알 수 있다.</BR>
```
SELECT COUNT(1)
  FROM EMPLOYEES
;
```
만약 SELECT 1을 입력한 경우라면 모든 ROW에 1로 도배되어있어 그것을 세는 것이다.</BR>
![image](https://github.com/user-attachments/assets/8fdafe89-dbdb-4dc9-8692-6b8134780029)

### MAX, MIN, AVG, SUM
```
SELECT MAX(SALARY)
  FROM EMPLOYEES
;
```
 위의 명령처럼 FROM에서 받은 테이블의 SALARY 컬럼의 최댓값을 구할 수 있다.</BR>
 다른 명령으로 최솟값을 구하는 MIN, 평균을 구하는 AVG, 합계를 구하는 SUM이 있다.</BR>

## 그룹핑(GROUP BY)
 ROW를 특정 컬럼으로 분류하여 집계함수를 사용할 수 있다. </BR>
 ```
SELECT DEPARTMENT_ID
     , MAX(SALARY)
     , MIN(SALARY)
 FROM EMPLOYEES
GROUP BY DEPARTMENT_ID , JOB_ID
```
위는 부서와 직무별로 그룹으로 나눈 뒤 최대연봉과, 최소연봉을 가져오는 것이다.</BR>
GROUP BY를 하지 않고 컬럼과, 집계함수를 사용하면 오류가 발생한다.</BR>
이 이유는 그룹을 하지 않으면 전체의 데이터에서 집계를 한것이라 1개의 ROW만 나타난다. 이것을 칼럼과 연결할 수 없기 때문이다.</BR>
(전체의 합과 부서 아이디를 어떻게 연결하냐, 부서 별 합을 한 경우에나 같이 연결할 수 있겠지)</BR>

#### * 중요한 것은 실무에서 GROUP BY를 사용하지 않는다는 것이다.

### 그룹 필터링(HAVING)
 HAVING [조건]을 통해서 데이터를 걸러낼 수 있다. 위 설명대로 실무에서 GROUP BY를 사용하지 않아 중복값 검증 용도로만 사용된다.</BR>
  
## 서브 쿼리
 자바에서 스트림 필터에서 스트림을 사용한 것과 같다고 생각하면 된다.</BR>
 서브 쿼리는 SELECT 쿼리 안에 SELECT 쿼리를 집어넣는 것을 말하며 조회하려는 대상을 정확히 알지 못할 때와 대상이 하나 이상일 경우 사용한다.</BR>
 (서브쿼리 사용 예시. 연봉이 3000이상인 상사ID 16를 소지하고 있는 사원의 ID를 구하기)
 ()괄호는 우선적으로 연산되기 때문에 쿼리를 ()으로 묶어서 사용한다. 
 
## 테이블 조인
 테이블 간의 연결을 의미한다. Primary key와 foreign key로 연결하여 관련 정보를 가져온다.</br>
 PK는 데이터를 구분할 수 있도록 무조건 값을 가지며 중복된 값을 가지지 않는다.</br>
 FK는 연결된(테이블에서 받는) 데이터라고 할 수 있다.</br>
 
## ERD
 테이블간의 관계를 정리한 다이어그램이다. 1:N, 1:1, N:N 등의 관계를 가질 수 있다.</br>

### n:n 관계
 1!1 관계는 하나의 값을 통해서 1개의 데이터만 가질 수 있는 경우를 말한다.(한 학급에는 하나의 담임이 존재) </br>
 1:N 관계는 하나의 값을 통해서 여러개의 데이터를 가져올 수 있는 경우를 말한다. (한 학급에는 여러 학생이 존재)</br>
 N:N 관계는 물리적으로는 불가능하고 논리적으로 가능한 관계이다. (학생은 여러 선생에게 강의를 듣는다. 선생은 여러 학생에게 강의를 들려준다.)</br>

### 식별/비식별 관계
 식별관계는 연결한 PK와 FK에서 FK가 PK가 되는 경우이고, 비식별관계는 단순한 PK와 FK의 결합을 말한다.</br>

### KEY가 다수인 테이블
 KEY가 다수라면 하나의 PK가 같아도 된다. 구분을 하는 방식이 PK가 2개라면 PK 2개를 이용하여 구분한다.</br>
 (A-1, A-2 등은 가능하지만, A-1, A-1은 안된다.)
 
